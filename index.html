<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<title>Safari Scroll + GIF</title>

<style>
/* RESET */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: black;
}

.video-layer {
    position: fixed;
    inset: 0;
    z-index: 0;
    overflow: hidden;
}

/* VIDEO REAL */
.video-layer video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* OSCURECER VIDEO */
.video-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.35);
}

/* CONTENIDO */
.page {
    position: relative;
    z-index: 1;
}

/* GIF SUPERIOR */
.gif-overlay {
    position: fixed;
    inset: 0;
    background: none;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.gif-overlay img {
    width: 60%;
    max-width: 300px;
}

/* OCULTAR GIF */
.gif-hidden {
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
}

.section {
    min-height: 100svh;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    background: transparent; /* CRÍTICO */
}

/* TEXTO CON ANIMACIÓN */
.reveal {
    opacity: 0;
    transform: translateY(40px);
    transition: all 0.8s ease;
}

.reveal.active {
    opacity: 1;
    transform: translateY(0);
}

h1 {
    font-size: clamp(2rem, 8vw, 3.5rem);
}

p {
    margin-top: 1rem;
    font-size: 1.2rem;
    opacity: 0.9;
}
</style>
</head>

<body>

<div class="video-layer">
    <video autoplay muted loop playsinline preload="metadata">
        <source src="sf.mp4" type="video/mp4">
    </video>
    <div class="video-overlay"></div>
</div>

<div class="page">

    <section class="section">
        <div class="reveal">
            <h1>Bienvenido</h1>
            <p>Ahora el video sí se ve</p>
        </div>
    </section>

    <section class="section">
        <div class="reveal">
            <h1>Scroll</h1>
            <p>Safari móvil sin fondo negro</p>
        </div>
    </section>

</div>


<script>
/* OCULTAR GIF DESPUÉS DE X SEGUNDOS */
setTimeout(() => {
    document.getElementById('gif').classList.add('gif-hidden');
}, 3000); // ajusta a la duración real del gif

/* APARECER TEXTO CON SCROLL */
const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('active');
        }
    });
}, { threshold: 0.3 });

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>

</body>
</html>